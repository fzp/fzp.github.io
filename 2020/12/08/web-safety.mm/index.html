<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="白帽子讲Web安全"><meta name="keywords" content="web safety,网络安全"><meta name="author" content="方镇澎"><meta name="copyright" content="方镇澎"><title>白帽子讲Web安全 | 方镇澎的博客</title><link rel="shortcut icon" href="/favicon.svg"><link rel="stylesheet" href="/css/index.css?version=1.9.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '5.2.0'
} </script><meta name="generator" content="Hexo 5.2.0"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Web-%E5%AE%89%E5%85%A8"><span class="toc-number">1.</span> <span class="toc-text">Web 安全</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E4%B8%96%E7%95%8C%E8%A7%82"><span class="toc-number">1.1.</span> <span class="toc-text">安全世界观</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E7%9A%84%E6%9C%AC%E8%B4%A8%EF%BC%9A%E4%BF%A1%E4%BB%BB"><span class="toc-number">1.1.1.</span> <span class="toc-text">安全的本质：信任</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E6%98%AF%E4%B8%80%E4%B8%AA%E6%8C%81%E7%BB%AD%E7%9A%84%E8%BF%87%E7%A8%8B"><span class="toc-number">1.1.2.</span> <span class="toc-text">安全是一个持续的过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E7%9A%84%E4%B8%89%E8%A6%81%E7%B4%A0-CIA"><span class="toc-number">1.1.3.</span> <span class="toc-text">安全的三要素 CIA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E8%AF%84%E4%BC%B0"><span class="toc-number">1.1.4.</span> <span class="toc-text">安全评估</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E6%96%B9%E6%A1%88%E5%8E%9F%E5%88%99"><span class="toc-number">1.1.5.</span> <span class="toc-text">安全方案原则</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Security-by-default"><span class="toc-number">1.1.5.1.</span> <span class="toc-text">Security by default</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%B5%E6%B7%B1%E9%98%B2%E5%BE%A1%E5%8E%9F%E5%88%99"><span class="toc-number">1.1.5.2.</span> <span class="toc-text">纵深防御原则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%B8%8E%E4%BB%A3%E7%A0%81%E5%88%86%E7%A6%BB%E5%8E%9F%E5%88%99"><span class="toc-number">1.1.5.3.</span> <span class="toc-text">数据与代码分离原则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E5%8F%AF%E9%A2%84%E6%B5%8B%E6%80%A7%E5%8E%9F%E5%88%99"><span class="toc-number">1.1.5.4.</span> <span class="toc-text">不可预测性原则</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%84%9A%E6%9C%AC%E5%AE%89%E5%85%A8"><span class="toc-number">1.2.</span> <span class="toc-text">客户端脚本安全</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AE%89%E5%85%A8"><span class="toc-number">1.2.1.</span> <span class="toc-text">浏览器安全</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">同源策略</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%EF%BC%8C%E5%9F%9F%E5%90%8D%EF%BC%8C%E7%AB%AF%E5%8F%A3%E7%9B%B8%E5%90%8C"><span class="toc-number">1.2.1.1.1.</span> <span class="toc-text">协议，域名，端口相同</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BBXSS"><span class="toc-number">1.2.2.</span> <span class="toc-text">跨站脚本攻击XSS</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%9CHTML%E6%B3%A8%E5%85%A5%E2%80%9D-%E6%8F%92%E5%85%A5%E6%81%B6%E6%84%8F%E8%84%9A%E6%9C%AC%E3%80%82%E8%B7%A8%E4%B8%8D%E8%B7%A8%E5%9F%9F%E5%B9%B6%E4%B8%8D%E9%87%8D%E8%A6%81"><span class="toc-number">1.2.2.1.1.</span> <span class="toc-text">“HTML注入”,插入恶意脚本。跨不跨域并不重要</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%B1%E5%AE%B3"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">危害</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%B2%E5%BE%A1"><span class="toc-number">1.2.2.4.</span> <span class="toc-text">防御</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0CSRF"><span class="toc-number">1.2.3.</span> <span class="toc-text">跨站请求伪造CSRF</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-1"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%AA%E9%80%A0%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82%EF%BC%8C%E6%89%A7%E8%A1%8C%E9%9D%9E%E7%94%A8%E6%88%B7%E6%9C%AC%E6%84%8F%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">1.2.3.1.1.</span> <span class="toc-text">伪造跨域请求，执行非用户本意的操作</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%AC%E8%B4%A8"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">本质</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%94%BB%E5%87%BB%E8%80%85%E8%83%BD%E7%8C%9C%E6%B5%8B%E8%AF%B7%E6%B1%82%E7%9A%84%E6%89%80%E6%9C%89%E5%8F%82%E6%95%B0"><span class="toc-number">1.2.3.2.1.</span> <span class="toc-text">攻击者能猜测请求的所有参数</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%B2%E5%BE%A1-1"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">防御</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%87%BB%E5%8A%AB%E6%8C%81"><span class="toc-number">1.2.4.</span> <span class="toc-text">点击劫持</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-2"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A7%86%E8%A7%89%E6%AC%BA%E9%AA%97%EF%BC%8C%E5%88%A9%E7%94%A8%E4%B8%8D%E5%8F%AF%E8%A7%81iframe%E8%A6%86%E7%9B%96%E5%9C%A8%E7%BD%91%E9%A1%B5%E4%B8%8A%EF%BC%8C%E8%AF%B1%E4%BD%BF%E7%94%A8%E6%88%B7%E7%82%B9%E5%87%BB"><span class="toc-number">1.2.4.1.1.</span> <span class="toc-text">视觉欺骗，利用不可见iframe覆盖在网页上，诱使用户点击</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%B2%E5%BE%A1-2"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">防御</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8"><span class="toc-number">1.3.</span> <span class="toc-text">服务器端应用安全</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB"><span class="toc-number">1.3.1.</span> <span class="toc-text">注入攻击</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-3"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B0%86%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BD%93%E4%BD%9C%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C"><span class="toc-number">1.3.1.1.1.</span> <span class="toc-text">将用户输入数据当作代码执行</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">条件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5%E9%98%B2%E5%BE%A1"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">SQL注入防御</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E5%8E%9F%E5%88%99"><span class="toc-number">1.3.1.4.</span> <span class="toc-text">安全原则</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%92%8C%E4%BB%A3%E7%A0%81%E5%88%86%E7%A6%BB%EF%BC%8C%E5%9C%A8%E6%8B%BC%E6%8E%A5%E5%A4%84%E5%81%9A%E5%AE%89%E5%85%A8%E6%A3%80%E6%9F%A5"><span class="toc-number">1.3.1.4.1.</span> <span class="toc-text">数据和代码分离，在拼接处做安全检查</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A4%E8%AF%81%E4%B8%8E%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86"><span class="toc-number">1.3.2.</span> <span class="toc-text">认证与会话管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-4"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%A4%E8%AF%81%E7%9A%84%E7%9B%AE%E7%9A%84%E6%98%AF%E8%AF%86%E5%88%AB%E7%94%A8%E6%88%B7%EF%BC%8C%E5%AE%9E%E9%99%85%E4%B8%8A%E6%98%AF%E9%AA%8C%E8%AF%81%E5%87%AD%E8%AF%81%E7%9A%84%E8%BF%87%E7%A8%8B%E3%80%82"><span class="toc-number">1.3.2.1.1.</span> <span class="toc-text">认证的目的是识别用户，实际上是验证凭证的过程。</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%86%E7%A0%81"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">密码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E5%9B%A0%E7%B4%A0%E8%AE%A4%E8%AF%81"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">多因素认证</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Session"><span class="toc-number">1.3.2.4.</span> <span class="toc-text">Session</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-5"><span class="toc-number">1.3.2.4.1.</span> <span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%AE%A4%E8%AF%81%E5%90%8E%E8%8E%B7%E5%BE%97%E7%9A%84%E5%AF%B9%E7%94%A8%E6%88%B7%E9%80%8F%E6%98%8E%E7%9A%84%E5%87%AD%E8%AF%81"><span class="toc-number">1.3.2.4.1.1.</span> <span class="toc-text">认证后获得的对用户透明的凭证</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Session-Fixation%E6%94%BB%E5%87%BB"><span class="toc-number">1.3.2.4.2.</span> <span class="toc-text">Session Fixation攻击</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%94%BB%E5%87%BB%E8%80%85%E7%9A%84SessionId%E7%99%BB%E9%99%86%EF%BC%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BD%BF%E7%94%A8%E4%BA%86%E8%AF%A5SessionId"><span class="toc-number">1.3.2.4.2.1.</span> <span class="toc-text">用户使用攻击者的SessionId登陆，服务器使用了该SessionId</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Session-%E4%BF%9D%E6%8C%81%E6%94%BB%E5%87%BB"><span class="toc-number">1.3.2.4.3.</span> <span class="toc-text">Session 保持攻击</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E4%B8%8D%E5%81%9C%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82%EF%BC%8C%E4%BF%9D%E6%8C%81Session%E5%AD%98%E6%B4%BB"><span class="toc-number">1.3.2.4.3.1.</span> <span class="toc-text">通过不停发送请求，保持Session存活</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E7%82%B9%E7%99%BB%E9%99%86"><span class="toc-number">1.3.2.5.</span> <span class="toc-text">单点登陆</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-6"><span class="toc-number">1.3.2.5.1.</span> <span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%99%BB%E9%99%86%E4%B8%80%E6%AC%A1%EF%BC%8C%E8%AE%BF%E9%97%AE%E6%89%80%E6%9C%89%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.3.2.5.1.1.</span> <span class="toc-text">登陆一次，访问所有系统</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.3.2.5.2.</span> <span class="toc-text">系统</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#OpenID"><span class="toc-number">1.3.2.5.2.1.</span> <span class="toc-text">OpenID</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6"><span class="toc-number">1.3.3.</span> <span class="toc-text">访问控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-7"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8E%88%E6%9D%83%EF%BC%8C%E5%8D%B3%E4%B8%BB%E4%BD%93%E5%AF%B9%E5%AE%A2%E4%BD%93%E6%93%8D%E4%BD%9C%E7%9A%84%E9%99%90%E5%88%B6"><span class="toc-number">1.3.3.1.1.</span> <span class="toc-text">授权，即主体对客体操作的限制</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9E%82%E7%9B%B4%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">垂直权限管理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E7%9A%84%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%EF%BC%88Role-Based-Access-Control%EF%BC%89"><span class="toc-number">1.3.3.2.1.</span> <span class="toc-text">基于用户权限的访问控制（Role-Based Access Control）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B0%B4%E5%B9%B3%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">1.3.3.3.</span> <span class="toc-text">水平权限管理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-8"><span class="toc-number">1.3.3.3.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%A1%88"><span class="toc-number">1.3.3.3.2.</span> <span class="toc-text">方案</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F-1"><span class="toc-number">1.3.3.4.</span> <span class="toc-text">系统</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%95%E5%88%99"><span class="toc-number">1.3.3.5.</span> <span class="toc-text">法则</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%B8%83%E5%BC%8F%E6%8B%92%E7%BB%9D%E6%9C%8D%E5%8A%A1%E6%94%BB%E5%87%BBDDOS"><span class="toc-number">1.3.4.</span> <span class="toc-text">分布式拒绝服务攻击DDOS</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%AC%E8%B4%A8-1"><span class="toc-number">1.3.4.1.</span> <span class="toc-text">本质</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SYN-flood"><span class="toc-number">1.3.4.2.</span> <span class="toc-text">SYN flood</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82DDOS%E9%98%B2%E5%BE%A1"><span class="toc-number">1.3.4.3.</span> <span class="toc-text">应用层DDOS防御</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-number">1.3.4.3.1.</span> <span class="toc-text">性能优化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E5%88%86%E6%B5%81%EF%BC%9A%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%8CCDN"><span class="toc-number">1.3.4.3.2.</span> <span class="toc-text">网络架构分流：负载均衡，CDN</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%99%90%E5%88%B6%E8%AF%B7%E6%B1%82%E9%A2%91%E7%8E%87"><span class="toc-number">1.3.4.3.3.</span> <span class="toc-text">限制请求频率</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">方镇澎</div><div class="author-info__description text-center">方镇澎 Blog Slides</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">14</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">31</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">方镇澎的博客</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">白帽子讲Web安全</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-12-09</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="Web-安全"><a href="#Web-安全" class="headerlink" title="Web 安全"></a>Web 安全</h1><h2 id="安全世界观"><a href="#安全世界观" class="headerlink" title="安全世界观"></a>安全世界观</h2><h3 id="安全的本质：信任"><a href="#安全的本质：信任" class="headerlink" title="安全的本质：信任"></a>安全的本质：信任</h3><ol>
<li>划分信任域</li>
<li>安全方案需要信任某些前提条件<h3 id="安全是一个持续的过程"><a href="#安全是一个持续的过程" class="headerlink" title="安全是一个持续的过程"></a>安全是一个持续的过程</h3></li>
<li>没有银弹， 攻击技术和防御技术在碰撞中不断发展<h3 id="安全的三要素-CIA"><a href="#安全的三要素-CIA" class="headerlink" title="安全的三要素 CIA"></a>安全的三要素 CIA</h3></li>
<li>机密性 Confidentiality</li>
<li>完整性 Integrity</li>
<li>可用性 Availability<h3 id="安全评估"><a href="#安全评估" class="headerlink" title="安全评估"></a>安全评估</h3></li>
<li>资产等级划分</li>
<li>威胁分析</li>
<li>风险分析</li>
<li>确认解决方案<h3 id="安全方案原则"><a href="#安全方案原则" class="headerlink" title="安全方案原则"></a>安全方案原则</h3><h4 id="Security-by-default"><a href="#Security-by-default" class="headerlink" title="Security by default"></a>Security by default</h4></li>
<li>白名单&gt;黑名单</li>
<li>最小权限原则<h4 id="纵深防御原则"><a href="#纵深防御原则" class="headerlink" title="纵深防御原则"></a>纵深防御原则</h4></li>
<li>不同层面实施安全方案</li>
<li>在正确的地方做正确的事情<h4 id="数据与代码分离原则"><a href="#数据与代码分离原则" class="headerlink" title="数据与代码分离原则"></a>数据与代码分离原则</h4><h4 id="不可预测性原则"><a href="#不可预测性原则" class="headerlink" title="不可预测性原则"></a>不可预测性原则</h4><h2 id="客户端脚本安全"><a href="#客户端脚本安全" class="headerlink" title="客户端脚本安全"></a>客户端脚本安全</h2><h3 id="浏览器安全"><a href="#浏览器安全" class="headerlink" title="浏览器安全"></a>浏览器安全</h3><h4 id="同源策略"><a href="#同源策略" class="headerlink" title="同源策略"></a>同源策略</h4><h5 id="协议，域名，端口相同"><a href="#协议，域名，端口相同" class="headerlink" title="协议，域名，端口相同"></a>协议，域名，端口相同</h5><h3 id="跨站脚本攻击XSS"><a href="#跨站脚本攻击XSS" class="headerlink" title="跨站脚本攻击XSS"></a>跨站脚本攻击XSS</h3><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><h5 id="“HTML注入”-插入恶意脚本。跨不跨域并不重要"><a href="#“HTML注入”-插入恶意脚本。跨不跨域并不重要" class="headerlink" title="“HTML注入”,插入恶意脚本。跨不跨域并不重要"></a>“HTML注入”,插入恶意脚本。跨不跨域并不重要</h5><h4 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h4></li>
<li>反射型<br>通过用户输入攻击，通常引诱用户点击恶意链接</li>
<li>存储型<br>持久化存储在服务器<h4 id="危害"><a href="#危害" class="headerlink" title="危害"></a>危害</h4></li>
<li>Cookie劫持</li>
<li>钓鱼</li>
<li>构造请求</li>
<li>识别浏览器，软件，IP，浏览记录等信息<h4 id="防御"><a href="#防御" class="headerlink" title="防御"></a>防御</h4></li>
<li>HttpOnly防止Cookie劫持</li>
<li>输入检查，过滤特殊字符</li>
<li>输出检查，编码转义<br>针对不同类型的文本和不同情景，需要用不同的转义方式<h3 id="跨站请求伪造CSRF"><a href="#跨站请求伪造CSRF" class="headerlink" title="跨站请求伪造CSRF"></a>跨站请求伪造CSRF</h3><h4 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h4><h5 id="伪造跨域请求，执行非用户本意的操作"><a href="#伪造跨域请求，执行非用户本意的操作" class="headerlink" title="伪造跨域请求，执行非用户本意的操作"></a>伪造跨域请求，执行非用户本意的操作</h5><h4 id="本质"><a href="#本质" class="headerlink" title="本质"></a>本质</h4><h5 id="攻击者能猜测请求的所有参数"><a href="#攻击者能猜测请求的所有参数" class="headerlink" title="攻击者能猜测请求的所有参数"></a>攻击者能猜测请求的所有参数</h5><h4 id="防御-1"><a href="#防御-1" class="headerlink" title="防御"></a>防御</h4></li>
<li>一致的做法：在请求上添加攻击者不能预测的token</li>
<li>验证码</li>
<li>Referer Check<h3 id="点击劫持"><a href="#点击劫持" class="headerlink" title="点击劫持"></a>点击劫持</h3><h4 id="简介-2"><a href="#简介-2" class="headerlink" title="简介"></a>简介</h4><h5 id="视觉欺骗，利用不可见iframe覆盖在网页上，诱使用户点击"><a href="#视觉欺骗，利用不可见iframe覆盖在网页上，诱使用户点击" class="headerlink" title="视觉欺骗，利用不可见iframe覆盖在网页上，诱使用户点击"></a>视觉欺骗，利用不可见iframe覆盖在网页上，诱使用户点击</h5><h4 id="防御-2"><a href="#防御-2" class="headerlink" title="防御"></a>防御</h4></li>
<li>frame busting. 写js代码，防止iframe 嵌套</li>
<li>X-Frame-Options/Content Swecurity Policy<h2 id="服务器端应用安全"><a href="#服务器端应用安全" class="headerlink" title="服务器端应用安全"></a>服务器端应用安全</h2><h3 id="注入攻击"><a href="#注入攻击" class="headerlink" title="注入攻击"></a>注入攻击</h3><h4 id="简介-3"><a href="#简介-3" class="headerlink" title="简介"></a>简介</h4><h5 id="将用户输入数据当作代码执行"><a href="#将用户输入数据当作代码执行" class="headerlink" title="将用户输入数据当作代码执行"></a>将用户输入数据当作代码执行</h5><h4 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h4></li>
<li>用户可以控制输入</li>
<li>程序要执行的程序拼接了用户代码<h4 id="SQL注入防御"><a href="#SQL注入防御" class="headerlink" title="SQL注入防御"></a>SQL注入防御</h4></li>
<li>使用预编译语句绑定变量</li>
<li>使用安全的存储过程</li>
<li>检查数据类型</li>
<li>使用安全的编码函数<h4 id="安全原则"><a href="#安全原则" class="headerlink" title="安全原则"></a>安全原则</h4><h5 id="数据和代码分离，在拼接处做安全检查"><a href="#数据和代码分离，在拼接处做安全检查" class="headerlink" title="数据和代码分离，在拼接处做安全检查"></a>数据和代码分离，在拼接处做安全检查</h5><h3 id="认证与会话管理"><a href="#认证与会话管理" class="headerlink" title="认证与会话管理"></a>认证与会话管理</h3><h4 id="简介-4"><a href="#简介-4" class="headerlink" title="简介"></a>简介</h4><h5 id="认证的目的是识别用户，实际上是验证凭证的过程。"><a href="#认证的目的是识别用户，实际上是验证凭证的过程。" class="headerlink" title="认证的目的是识别用户，实际上是验证凭证的过程。"></a>认证的目的是识别用户，实际上是验证凭证的过程。</h5>系统—屋子<br>认证—钥匙开锁<br>钥匙—凭证<h4 id="密码"><a href="#密码" class="headerlink" title="密码"></a>密码</h4></li>
<li>成本低，过程简单</li>
<li>没有统一策略，应对复杂度有要求，不要使用用户公开数据</li>
<li>应以不可逆方式加密保存</li>
<li>加Salt防止彩虹表<h4 id="多因素认证"><a href="#多因素认证" class="headerlink" title="多因素认证"></a>多因素认证</h4></li>
<li>动态口令</li>
<li>数字证书</li>
<li>手机绑定</li>
<li>…….<h4 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h4><h5 id="简介-5"><a href="#简介-5" class="headerlink" title="简介"></a>简介</h5><h6 id="认证后获得的对用户透明的凭证"><a href="#认证后获得的对用户透明的凭证" class="headerlink" title="认证后获得的对用户透明的凭证"></a>认证后获得的对用户透明的凭证</h6><h5 id="Session-Fixation攻击"><a href="#Session-Fixation攻击" class="headerlink" title="Session Fixation攻击"></a>Session Fixation攻击</h5><h6 id="用户使用攻击者的SessionId登陆，服务器使用了该SessionId"><a href="#用户使用攻击者的SessionId登陆，服务器使用了该SessionId" class="headerlink" title="用户使用攻击者的SessionId登陆，服务器使用了该SessionId"></a>用户使用攻击者的SessionId登陆，服务器使用了该SessionId</h6></li>
<li>用户登陆后，重写SessionId<h5 id="Session-保持攻击"><a href="#Session-保持攻击" class="headerlink" title="Session 保持攻击"></a>Session 保持攻击</h5><h6 id="通过不停发送请求，保持Session存活"><a href="#通过不停发送请求，保持Session存活" class="headerlink" title="通过不停发送请求，保持Session存活"></a>通过不停发送请求，保持Session存活</h6></li>
<li>定期销毁Session<h4 id="单点登陆"><a href="#单点登陆" class="headerlink" title="单点登陆"></a>单点登陆</h4><h5 id="简介-6"><a href="#简介-6" class="headerlink" title="简介"></a>简介</h5><h6 id="登陆一次，访问所有系统"><a href="#登陆一次，访问所有系统" class="headerlink" title="登陆一次，访问所有系统"></a>登陆一次，访问所有系统</h6>方便，风险集中<h5 id="系统"><a href="#系统" class="headerlink" title="系统"></a>系统</h5><h6 id="OpenID"><a href="#OpenID" class="headerlink" title="OpenID"></a>OpenID</h6><h3 id="访问控制"><a href="#访问控制" class="headerlink" title="访问控制"></a>访问控制</h3><h4 id="简介-7"><a href="#简介-7" class="headerlink" title="简介"></a>简介</h4><h5 id="授权，即主体对客体操作的限制"><a href="#授权，即主体对客体操作的限制" class="headerlink" title="授权，即主体对客体操作的限制"></a>授权，即主体对客体操作的限制</h5><h4 id="垂直权限管理"><a href="#垂直权限管理" class="headerlink" title="垂直权限管理"></a>垂直权限管理</h4><h5 id="基于用户权限的访问控制（Role-Based-Access-Control）"><a href="#基于用户权限的访问控制（Role-Based-Access-Control）" class="headerlink" title="基于用户权限的访问控制（Role-Based Access Control）"></a>基于用户权限的访问控制（Role-Based Access Control）</h5></li>
<li>用户—角色—权限</li>
<li>角色之间有权限高低之分<h4 id="水平权限管理"><a href="#水平权限管理" class="headerlink" title="水平权限管理"></a>水平权限管理</h4><h5 id="简介-8"><a href="#简介-8" class="headerlink" title="简介"></a>简介</h5></li>
<li>对同一角色的不同用户进行权限管理</li>
<li>基于数据的访问控制<h5 id="方案"><a href="#方案" class="headerlink" title="方案"></a>方案</h5></li>
<li>用户组</li>
<li>规则引擎<h4 id="系统-1"><a href="#系统-1" class="headerlink" title="系统"></a>系统</h4></li>
<li>OAuth<h4 id="法则"><a href="#法则" class="headerlink" title="法则"></a>法则</h4></li>
<li>最小权限原则<h3 id="分布式拒绝服务攻击DDOS"><a href="#分布式拒绝服务攻击DDOS" class="headerlink" title="分布式拒绝服务攻击DDOS"></a>分布式拒绝服务攻击DDOS</h3><h4 id="本质-1"><a href="#本质-1" class="headerlink" title="本质"></a>本质</h4></li>
<li>有限资源的无限滥用</li>
<li>防御：根据攻击特征，清洗流量<h4 id="SYN-flood"><a href="#SYN-flood" class="headerlink" title="SYN flood"></a>SYN flood</h4></li>
<li>发送SYN包后不回应SYN/ACK</li>
<li>统计IP访问频率，清洗流量<h4 id="应用层DDOS防御"><a href="#应用层DDOS防御" class="headerlink" title="应用层DDOS防御"></a>应用层DDOS防御</h4><h5 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h5><h5 id="网络架构分流：负载均衡，CDN"><a href="#网络架构分流：负载均衡，CDN" class="headerlink" title="网络架构分流：负载均衡，CDN"></a>网络架构分流：负载均衡，CDN</h5><h5 id="限制请求频率"><a href="#限制请求频率" class="headerlink" title="限制请求频率"></a>限制请求频率</h5></li>
<li>验证码</li>
<li>让客户端解析JS代码</li>
<li>服务器配置</li>
<li>IP和Cookie信息</li>
</ol>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">方镇澎</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://fzp.github.io/2020/12/08/web-safety.mm/">http://fzp.github.io/2020/12/08/web-safety.mm/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/web-safety/">web safety</a><a class="post-meta__tags" href="/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/">网络安全</a></div><nav id="pagination"><div class="next-post pull-right"><a href="/2020/12/02/hexo-blog/"><span>Blog &amp; Slides</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2020 By 方镇澎</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.1"></script><script src="/js/fancybox.js?version=1.9.1"></script><script src="/js/sidebar.js?version=1.9.1"></script><script src="/js/copy.js?version=1.9.1"></script><script src="/js/fireworks.js?version=1.9.1"></script><script src="/js/transition.js?version=1.9.1"></script><script src="/js/scroll.js?version=1.9.1"></script><script src="/js/head.js?version=1.9.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>